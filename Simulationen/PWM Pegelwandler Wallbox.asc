Version 4
SHEET 1 1444 724
WIRE 784 -144 752 -144
WIRE 912 -144 864 -144
WIRE 1216 -96 1024 -96
WIRE 1280 -96 1216 -96
WIRE 80 -80 -256 -80
WIRE 320 -80 80 -80
WIRE 816 -80 368 -80
WIRE 816 -64 816 -80
WIRE 640 -48 608 -48
WIRE 752 -48 752 -144
WIRE 752 -48 720 -48
WIRE 784 -48 752 -48
WIRE 912 -32 912 -144
WIRE 912 -32 848 -32
WIRE 944 -32 912 -32
WIRE 1024 -32 1024 -96
WIRE 784 -16 752 -16
WIRE 752 16 752 -16
WIRE 816 16 816 0
WIRE 256 48 -16 48
WIRE 576 48 256 48
WIRE 912 48 752 48
WIRE 1216 48 1024 48
WIRE 1280 48 1216 48
WIRE 368 64 368 -80
WIRE 368 64 80 64
WIRE 816 64 368 64
WIRE -16 80 -16 48
WIRE 80 80 80 64
WIRE 816 80 816 64
WIRE 256 96 256 48
WIRE 752 96 752 48
WIRE 784 96 752 96
WIRE 912 112 912 48
WIRE 912 112 848 112
WIRE 944 112 912 112
WIRE 1024 112 1024 48
WIRE 1104 112 1104 -32
WIRE 608 128 608 -48
WIRE 784 128 608 128
WIRE 368 160 368 64
WIRE 816 160 816 144
WIRE 1104 160 1104 112
WIRE 336 176 256 176
WIRE -16 192 -16 160
WIRE 80 192 80 160
WIRE 80 192 -16 192
WIRE 464 192 400 192
WIRE 608 192 608 128
WIRE 608 192 544 192
WIRE 1216 192 608 192
WIRE 1280 192 1216 192
WIRE 1360 192 1344 192
WIRE 256 208 256 176
WIRE 320 208 320 -80
WIRE 336 208 320 208
WIRE 80 224 80 192
WIRE 912 224 752 224
WIRE -16 240 -16 192
WIRE 576 240 576 48
WIRE 608 240 576 240
WIRE 816 240 608 240
WIRE 816 256 816 240
WIRE 752 272 752 224
WIRE 784 272 752 272
WIRE 912 288 912 224
WIRE 912 288 848 288
WIRE 1216 288 912 288
WIRE 1280 288 1216 288
WIRE 608 304 608 240
WIRE 640 304 608 304
WIRE 752 304 720 304
WIRE 784 304 752 304
WIRE 80 320 80 304
WIRE 368 320 368 224
WIRE 368 320 80 320
WIRE 816 336 816 320
WIRE 752 368 752 304
WIRE 1216 368 752 368
WIRE 1360 368 1216 368
WIRE 368 384 304 384
WIRE 448 384 368 384
WIRE 480 384 448 384
WIRE 576 384 576 240
WIRE 576 384 544 384
WIRE -176 432 -256 432
WIRE 96 432 -176 432
WIRE 208 432 176 432
WIRE 240 432 208 432
WIRE 368 432 368 384
WIRE 208 464 208 432
WIRE 368 544 368 528
WIRE 368 544 208 544
WIRE 368 560 368 544
WIRE 448 576 448 384
WIRE 576 576 576 384
FLAG -16 240 0
FLAG 256 288 0
FLAG -256 0 0
FLAG 1360 272 0
FLAG 752 16 0
FLAG 816 16 0
FLAG 816 160 0
FLAG 1104 160 0
FLAG 1216 192 CP
FLAG 1216 48 PWM_MAX
FLAG 1216 -96 PWM_MIN
FLAG 80 -80 PWM_IN
FLAG 816 336 0
FLAG 1360 448 0
FLAG 1216 368 PP
FLAG 1216 288 I_MAX
FLAG 368 560 0
FLAG -176 432 RELAY_SW
FLAG 576 576 RELAY+
FLAG 448 576 RELAY-
SYMBOL voltage 80 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 80 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -16 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res 240 80 R0
SYMATTR InstName R1
SYMATTR Value 10K
SYMBOL res 240 192 R0
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL voltage -256 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 5 0 0 0 0.0001 0.001)
SYMBOL res 1344 176 R0
SYMATTR InstName R3
SYMATTR Value 2700
SYMBOL OpAmps\\AD820 368 128 R0
SYMATTR InstName U2
SYMBOL res 560 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 880
SYMBOL diode 1280 208 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL OpAmps\\AD820 816 -96 R0
SYMATTR InstName U1
SYMBOL res 736 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 880 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL OpAmps\\AD820 816 48 R0
SYMATTR InstName U3
SYMBOL res 1040 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 15k
SYMBOL res 1120 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1040 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 15k
SYMBOL res 1120 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 736 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL OpAmps\\AD820 816 224 R0
SYMATTR InstName U4
SYMBOL res 1344 352 R0
SYMATTR InstName R12
SYMATTR Value 220
SYMBOL npn 240 384 R0
SYMATTR InstName Q1
SYMBOL npn 304 432 R0
SYMATTR InstName Q2
SYMBOL res 192 448 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res 192 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL diode 480 400 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
TEXT -16 360 Left 2 !.tran .01s
